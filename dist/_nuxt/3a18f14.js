(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{202:function(t,e,o){var content=o(317);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(86).default)("56b15182",content,!0,{sourceMap:!1})},273:function(t,e,o){"use strict";var r={data:function(){return{isLoginActive:!1,loginEmail:"",loginPassword:"",recoverEmail:"",isActive:!1,newPass1:"",newPass2:"",items:[{title:"Tus votaciones",icon:"home",to:{name:"dashboard"}},{title:"Perfil",icon:"star",to:{name:"profile"}}]}},computed:{store_user_uid:function(){return this.$store.state.store_user_uid},store_token:function(){return this.$store.state.store_token},store_user_email:function(){return this.$store.state.store_user_email},store_user_name:function(){return this.$store.state.store_user_name},loaded:function(){return this.$store.state.localStorage.status&&this.$store.state.sessionStorage.status}},methods:{login:function(){var t=this;return this.$axios.post("login/",{user_name:this.loginEmail,user_password:this.loginPassword}).then((function(e){if("10"==e.data.result&&(console.log(e.data.message),t.$store.commit("store_saveToken",e.data.token),t.$store.commit("store_saveUser",e.data.uid),t.getUser(e.data.token,e.data.uid),t.loginEmail="",t.loginPassword="",t.isLoginActive=!1,t.$store.commit("localStorage/localStorage_saveToken",e.data.token),t.$store.commit("localStorage/localStorage_saveUser",e.data.uid),t.$store.commit("sessionStorage/sessionStorage_saveToken",e.data.token),t.$store.commit("sessionStorage/sessionStorage_saveUser",e.data.uid),t.$router.app.refresh(),t.$router.push("/dashboard")),"0"==e.data.result){var o=e.data.error;t.loginEmail="",t.loginPassword="",alert(o)}})).catch((function(t){console.log(t)}))},logout:function(){this.$store.commit("store_saveToken",null),this.$store.commit("store_saveUser",null),this.$store.commit("store_saveName",null),this.$store.commit("store_saveEmail",null),this.$store.commit("store_saveAssembly",null),this.$store.commit("store_savePresentation",null),this.$store.commit("localStorage/localStorage_saveToken",null),this.$store.commit("localStorage/localStorage_saveUser",null),this.$store.commit("sessionStorage/sessionStorage_saveToken",null),this.$store.commit("sessionStorage/sessionStorage_saveUser",null),this.$router.push("/")},register:function(){this.isLoginActive=!1,this.$router.push("/register")},getUser:function(t,e){var o=this;this.$axios.post("/voter/",{uid:e,token:t}).then((function(t){"10"==t.data.result&&(o.$store.commit("store_saveName",t.data.user_name),o.$store.commit("store_saveEmail",t.data.user_email)),"0"==t.data.result&&alert(t.data.error)})).catch((function(t){console.log(t)}))},toIndex:function(){this.$router.push("/")}},created:function(){var t=!1;this.$store.state.store_user_uid?this.getUser(this.$store.state.store_token,this.$store.state.store_user_uid):(this.$store.state.localStorage.localStorage_user_uid?(this.$store.commit("store_saveToken",this.$store.state.localStorage.localStorage_token),this.$store.commit("store_saveUser",this.$store.state.localStorage.localStorage_user_uid),t=!0):this.$store.state.sessionStorage.sessionStorage_user_uid&&(this.$store.commit("store_saveToken",this.$store.state.sessionStorage.sessionStorage_token),this.$store.commit("store_saveUser",this.$store.state.sessionStorage.sessionStorage_user_uid),t=!0),t&&this.getUser(this.$store.state.store_token,this.$store.state.store_user_uid))}},n=(o(316),o(53)),component=Object(n.a)(r,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("nav",{staticClass:"navbar header has-shadow is-primary",attrs:{role:"navigation","aria-label":"main navigation"}},[o("div",{staticClass:"navbar-brand"},[o("a",{staticClass:"navbar-item",on:{click:t.toIndex}},[t._v("Assembly-voting  "),o("div",{staticClass:"separator"},[o("b-icon",{attrs:{icon:"chart-box",size:"is-medium"}})],1)]),t._v(" "),o("div",{staticClass:"navbar-burger",on:{click:function(e){t.isActive=!t.isActive}}},[o("span"),t._v(" "),o("span"),t._v(" "),o("span")])]),t._v(" "),o("div",{staticClass:"navbar-menu",class:{active:t.isActive}},[t.store_user_uid?t._e():o("div",{staticClass:"navbar-end"},[o("div",{staticClass:"navbar-item"},[o("div",{staticClass:"buttons"},[o("NuxtLink",{staticClass:"button",attrs:{to:"/register"}},[o("strong",[t._v("Registro")])]),t._v(" "),o("a",{staticClass:"button is-light",on:{click:function(e){t.isLoginActive=!0}}},[t._v("\n              Acceder\n            ")])],1)])]),t._v(" "),t.store_user_uid?o("div",{staticClass:"navbar-end"},[o("div",{staticClass:"navbar-item"},[o("div",{staticClass:"buttons"},[o("a",{staticClass:"button",on:{click:t.logout}},[o("strong",[t._v("Cerrar Sesión")])])])])]):t._e()])]),t._v(" "),o("section",{staticClass:"main-content columns"},[o("aside",{staticClass:"column is-3 section"},[o("p",{staticClass:"menu-label is-hidden-touch"},[t._v("\n        General\n      ")]),t._v(" "),o("ul",{staticClass:"menu-list"},t._l(t.items,(function(e,r){return o("li",{key:r},[o("nuxt-link",{attrs:{to:e.to,"exact-active-class":"is-active"}},[o("b-icon",{attrs:{icon:e.icon}}),t._v(" "+t._s(e.title)+"\n          ")],1)],1)})),0)]),t._v(" "),o("div",{staticClass:"container column is-9"},[o("nuxt")],1)]),t._v(" "),o("b-modal",{attrs:{active:t.isLoginActive},on:{"update:active":function(e){t.isLoginActive=e}}},[o("form",{attrs:{action:""},on:{submit:function(e){return e.preventDefault(),t.login.apply(null,arguments)}}},[o("div",{staticClass:"modal-card",staticStyle:{width:"auto"}},[o("header",{staticClass:"modal-card-head"},[o("p",{staticClass:"modal-card-title"},[t._v("Identificación")])]),t._v(" "),o("section",{staticClass:"modal-card-body"},[o("b-field",{attrs:{label:"Email"}},[o("b-input",{attrs:{type:"email",placeholder:"Tu email",required:""},model:{value:t.loginEmail,callback:function(e){t.loginEmail=e},expression:"loginEmail"}})],1),t._v(" "),o("b-field",{attrs:{label:"Contraseña"}},[o("b-input",{attrs:{type:"password","password-reveal":"",placeholder:"Tu contraseña",required:""},model:{value:t.loginPassword,callback:function(e){t.loginPassword=e},expression:"loginPassword"}})],1)],1),t._v(" "),o("section",{staticClass:"modal-card-body"},[o("a",{on:{click:t.register}},[o("strong",[t._v("Nunca he accedido/He olvidado mi contraseña")])])]),t._v(" "),o("footer",{staticClass:"modal-card-foot"},[o("button",{staticClass:"button is-primary"},[t._v("Acceder")])])])])])],1)}),[],!1,null,null,null);e.a=component.exports},274:function(t,e,o){o(275),t.exports=o(276)},316:function(t,e,o){"use strict";o(202)},317:function(t,e,o){var r=o(85)(!1);r.push([t.i,".active{display:block!important}.separator{margin-left:5px}",""]),t.exports=r},318:function(t,e,o){"use strict";o.r(e),o.d(e,"state",(function(){return r})),o.d(e,"mutations",(function(){return n}));var r=function(){return{store_token:null,store_user_uid:null,store_user_name:null,store_user_email:null,store_current_assembly:null,store_current_presentation:null}},n={store_saveUser:function(t,e){t.store_user_uid=e},store_saveToken:function(t,e){t.store_token=e},store_saveName:function(t,e){t.store_user_name=e},store_saveEmail:function(t,e){t.store_user_email=e},store_saveAssembly:function(t,e){t.store_current_assembly=e},store_savePresentation:function(t,e){t.store_current_presentation=e}}},319:function(t,e,o){"use strict";o.r(e),o.d(e,"state",(function(){return r})),o.d(e,"mutations",(function(){return n}));var r=function(){return{localStorage_token:null,localStorage_user_uid:null}},n={localStorage_saveUser:function(t,e){t.localStorage_user_uid=e},localStorage_saveToken:function(t,e){t.localStorage_token=e}}},320:function(t,e,o){"use strict";o.r(e),o.d(e,"state",(function(){return r})),o.d(e,"mutations",(function(){return n}));var r=function(){return{sessionStorage_token:null,sessionStorage_user_uid:null}},n={sessionStorage_saveUser:function(t,e){t.sessionStorage_user_uid=e},sessionStorage_saveToken:function(t,e){t.sessionStorage_token=e}}},324:function(t,e){},326:function(t,e){},337:function(t,e){},339:function(t,e){},364:function(t,e){},366:function(t,e){},367:function(t,e){},372:function(t,e){},374:function(t,e){},393:function(t,e){},405:function(t,e){},408:function(t,e){}},[[274,12,1,13]]]);